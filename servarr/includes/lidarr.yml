services:
  lidarr:
    container_name: lidarr
    image: linuxserver/lidarr:latest
    user: 568:568
    ports:
      - 8686:8686
    env_file:
      - ../stack.env
    environment:
      PUID: 568
      PGID: 568
    volumes:
      - "${LIDARR_MOUNT_PATH}/config:/config"
      - "${MEDIA_MOUNT_PATH}/music:/music"
      - "${MEDIA_MOUNT_PATH}/downloads:/downloads"
    deploy:
      resources:
        limits:
          memory: 500M
    labels:
      traefik.enable: true
      traefik.http.routers.lidarr.rule: Host(`lidarr.starsystem.dev`)
      traefik.http.routers.lidarr.entrypoints: websecure
      traefik.http.services.lidarr.loadbalancer.server.port: 8686
    restart: unless-stopped